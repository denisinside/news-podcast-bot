# –î–æ–∫—É–º–µ–Ω—Ç–∞—Ü—ñ—è —Ç–µ—Å—Ç—É–≤–∞–Ω–Ω—è

## ‚úÖ –°—Ç–∞—Ç—É—Å —Ç–µ—Å—Ç—ñ–≤

**–í—Å—ñ —Ç–µ—Å—Ç–∏ –ø—Ä–æ—Ö–æ–¥—è—Ç—å —É—Å–ø—ñ—à–Ω–æ!** üéâ

- **148 —Ç–µ—Å—Ç—ñ–≤ –ø—Ä–æ–π—à–ª–æ** ‚úÖ
- **0 —Ç–µ—Å—Ç—ñ–≤ –Ω–µ –ø—Ä–æ–π—à–ª–æ** ‚úÖ
- **16 —Ç–µ—Å—Ç–æ–≤–∏—Ö –Ω–∞–±–æ—Ä—ñ–≤** ‚úÖ

## –°—Ç—Ä—É–∫—Ç—É—Ä–∞ —Ç–µ—Å—Ç—ñ–≤

```
tests/
‚îú‚îÄ‚îÄ unit/                          # –Æ–Ω—ñ—Ç —Ç–µ—Å—Ç–∏
‚îÇ   ‚îú‚îÄ‚îÄ application/services/      # –¢–µ—Å—Ç–∏ –¥–ª—è —Å–µ—Ä–≤—ñ—Å—ñ–≤
‚îÇ   ‚îÇ   ‚îî‚îÄ‚îÄ MessageTemplateService.test.ts
‚îÇ   ‚îú‚îÄ‚îÄ infrastructure/            # –¢–µ—Å—Ç–∏ –¥–ª—è —ñ–Ω—Ñ—Ä–∞—Å—Ç—Ä—É–∫—Ç—É—Ä–∏
‚îÇ   ‚îÇ   ‚îú‚îÄ‚îÄ clients/              # –¢–µ—Å—Ç–∏ –¥–ª—è –∫–ª—ñ—î–Ω—Ç—ñ–≤
‚îÇ   ‚îÇ   ‚îÇ   ‚îú‚îÄ‚îÄ GeminiClient.test.ts
‚îÇ   ‚îÇ   ‚îÇ   ‚îú‚îÄ‚îÄ FileStorageClient.test.ts
‚îÇ   ‚îÇ   ‚îÇ   ‚îú‚îÄ‚îÄ QueueClient.test.ts
‚îÇ   ‚îÇ   ‚îÇ   ‚îî‚îÄ‚îÄ TextToSpeechClient.test.ts
‚îÇ   ‚îÇ   ‚îî‚îÄ‚îÄ repositories/          # –¢–µ—Å—Ç–∏ –¥–ª—è —Ä–µ–ø–æ–∑–∏—Ç–æ—Ä—ñ—ó–≤
‚îÇ   ‚îÇ       ‚îú‚îÄ‚îÄ ArticleRepository.test.ts
‚îÇ   ‚îÇ       ‚îú‚îÄ‚îÄ UserRepository.test.ts
‚îÇ   ‚îÇ       ‚îú‚îÄ‚îÄ TopicRepository.test.ts
‚îÇ   ‚îÇ       ‚îú‚îÄ‚îÄ PodcastRepository.test.ts
‚îÇ   ‚îÇ       ‚îî‚îÄ‚îÄ SubscriptionRepository.test.ts
‚îÇ   ‚îî‚îÄ‚îÄ models/                    # –¢–µ—Å—Ç–∏ –¥–ª—è –º–æ–¥–µ–ª–µ–π
‚îÇ       ‚îú‚îÄ‚îÄ User.test.ts
‚îÇ       ‚îú‚îÄ‚îÄ Article.test.ts
‚îÇ       ‚îú‚îÄ‚îÄ Topic.test.ts
‚îÇ       ‚îú‚îÄ‚îÄ Podcast.test.ts
‚îÇ       ‚îú‚îÄ‚îÄ Subscription.test.ts
‚îÇ       ‚îî‚îÄ‚îÄ UserSettings.test.ts
‚îî‚îÄ‚îÄ fixtures/                     # –§—ñ–∫—Å—Ç—É—Ä–∏ —Ç–∞ –º–æ–∫–∏
    ‚îî‚îÄ‚îÄ mocks/                    # –ú–æ–∫-–¥–∞–Ω—ñ —Ç–∞ —Ñ–∞–±—Ä–∏–∫–∏
        ‚îî‚îÄ‚îÄ index.ts
```

## –ó–∞–ø—É—Å–∫ —Ç–µ—Å—Ç—ñ–≤

### –í—Å—ñ —Ç–µ—Å—Ç–∏
```bash
npm test
```

### –¢—ñ–ª—å–∫–∏ —é–Ω—ñ—Ç —Ç–µ—Å—Ç–∏
```bash
npm run test:unit
```

### –¢—ñ–ª—å–∫–∏ —ñ–Ω—Ç–µ–≥—Ä–∞—Ü—ñ–π–Ω—ñ —Ç–µ—Å—Ç–∏
```bash
npm run test:integration
```

### –¢—ñ–ª—å–∫–∏ E2E —Ç–µ—Å—Ç–∏
```bash
npm run test:e2e
```

### –¢–µ—Å—Ç–∏ –∑ –ø–æ–∫—Ä–∏—Ç—Ç—è–º –∫–æ–¥—É
```bash
npm run test:coverage
```

### –¢–µ—Å—Ç–∏ –≤ —Ä–µ–∂–∏–º—ñ watch
```bash
npm run test:watch
```

### –¢–µ—Å—Ç–∏ –¥–ª—è CI/CD
```bash
npm run test:ci
```

## –ü–æ–∫—Ä–∏—Ç—Ç—è –∫–æ–¥—É

–ü–æ—Ç–æ—á–Ω–µ –ø–æ–∫—Ä–∏—Ç—Ç—è:
- **–í—Å—ñ –º–æ–¥–µ–ª—ñ**: 100% statements, 100% functions ‚úÖ
  - User, Article, Topic, Podcast, Subscription, UserSettings
- **–í—Å—ñ —Ä–µ–ø–æ–∑–∏—Ç–æ—Ä—ñ—ó**: 87-100% statements, 90-100% functions ‚úÖ
  - ArticleRepository: 95.83% statements, 100% functions
  - UserRepository: 100% statements, 100% functions
  - TopicRepository: 100% statements, 100% functions
  - PodcastRepository: 100% statements, 100% functions
  - SubscriptionRepository: 100% statements, 100% functions
- **–í—Å—ñ –∫–ª—ñ—î–Ω—Ç–∏**: 100% statements, 100% functions ‚úÖ
  - GeminiClient: 100% statements, 100% functions
  - FileStorageClient: 100% statements, 100% functions
  - QueueClient: 100% statements, 100% functions
  - TextToSpeechClient: 100% statements, 100% functions
- **MessageTemplateService**: 94.44% statements, 100% functions

## –ù–∞–ø–∏—Å–∞–Ω–Ω—è —Ç–µ—Å—Ç—ñ–≤

### –°—Ç—Ä—É–∫—Ç—É—Ä–∞ —Ç–µ—Å—Ç—É

```typescript
import { ServiceName } from '@application/services/ServiceName';

describe('ServiceName', () => {
  let service: ServiceName;

  beforeEach(() => {
    service = new ServiceName();
  });

  describe('methodName', () => {
    it('should perform expected behavior', () => {
      // Arrange
      const input = 'test';

      // Act
      const result = service.methodName(input);

      // Assert
      expect(result).toBeDefined();
    });
  });
});
```

## –ü—Ä–æ—Ç–µ—Å—Ç–æ–≤–∞–Ω—ñ –∫–æ–º–ø–æ–Ω–µ–Ω—Ç–∏

### ‚úÖ –ú–æ–¥–µ–ª—ñ (100% –ø–æ–∫—Ä–∏—Ç—Ç—è)
- **User** - –≤–∞–ª—ñ–¥–∞—Ü—ñ—è —Å—Ö–µ–º–∏, —Ä–æ–ª—ñ, –∑–Ω–∞—á–µ–Ω–Ω—è –∑–∞ –∑–∞–º–æ–≤—á—É–≤–∞–Ω–Ω—è–º
- **Article** - –≤–∞–ª—ñ–¥–∞—Ü—ñ—è —Å—Ö–µ–º–∏, —Ç–∏–ø–∏ –¥–∞–Ω–∏—Ö, –æ–±—Ä—ñ–∑–∞–Ω–Ω—è —Ç–µ–∫—Å—Ç—É
- **Topic** - –≤–∞–ª—ñ–¥–∞—Ü—ñ—è —Å—Ö–µ–º–∏, –æ–±–æ–≤'—è–∑–∫–æ–≤—ñ –ø–æ–ª—è
- **Podcast** - —Å—Ç–∞—Ç—É—Å–∏, —Ç–∏–ø–∏ –¥–∞–Ω–∏—Ö, –º–∞—Å–∏–≤–∏ ObjectId
- **Subscription** - –ø—ñ–¥–ø–∏—Å–∫–∏, –∑–Ω–∞—á–µ–Ω–Ω—è –∑–∞ –∑–∞–º–æ–≤—á—É–≤–∞–Ω–Ω—è–º
- **UserSettings** - —á–∞—Å—Ç–æ—Ç–∞ –Ω–æ–≤–∏–Ω, –Ω–∞–ª–∞—à—Ç—É–≤–∞–Ω–Ω—è –∞—É–¥—ñ–æ

### ‚úÖ –†–µ–ø–æ–∑–∏—Ç–æ—Ä—ñ—ó (87-100% –ø–æ–∫—Ä–∏—Ç—Ç—è)
- **ArticleRepository** - CRUD –æ–ø–µ—Ä–∞—Ü—ñ—ó, bulk insert, —Ñ—ñ–ª—å—Ç—Ä–∞—Ü—ñ—è –ø–æ –¥–∞—Ç–∞—Ö
- **UserRepository** - —É–ø—Ä–∞–≤–ª—ñ–Ω–Ω—è –∫–æ—Ä–∏—Å—Ç—É–≤–∞—á–∞–º–∏, –±–ª–æ–∫—É–≤–∞–Ω–Ω—è, –ø—ñ–¥—Ä–∞—Ö—É–Ω–∫–∏
- **TopicRepository** - —É–ø—Ä–∞–≤–ª—ñ–Ω–Ω—è —Ç–µ–º–∞–º–∏, –ø–µ—Ä–µ–≤—ñ—Ä–∫–∞ —É–Ω—ñ–∫–∞–ª—å–Ω–æ—Å—Ç—ñ
- **PodcastRepository** - —É–ø—Ä–∞–≤–ª—ñ–Ω–Ω—è –ø–æ–¥–∫–∞—Å—Ç–∞–º–∏, –ø–æ–ø—É–ª—è—Ü—ñ—è —Å—Ç–∞—Ç–µ–π
- **SubscriptionRepository** - —É–ø—Ä–∞–≤–ª—ñ–Ω–Ω—è –ø—ñ–¥–ø–∏—Å–∫–∞–º–∏, –ø–µ—Ä–µ–≤—ñ—Ä–∫–∞ —ñ—Å–Ω—É–≤–∞–Ω–Ω—è

### ‚úÖ –°–µ—Ä–≤—ñ—Å–∏  
- **MessageTemplateService** - —Ñ–æ—Ä–º–∞—Ç—É–≤–∞–Ω–Ω—è –ø–æ–≤—ñ–¥–æ–º–ª–µ–Ω—å, –æ–±—Ä—ñ–∑–∞–Ω–Ω—è —Ç–µ–∫—Å—Ç—É

### ‚úÖ –ö–ª—ñ—î–Ω—Ç–∏ (100% –ø–æ–∫—Ä–∏—Ç—Ç—è)
- **GeminiClient** - –≥–µ–Ω–µ—Ä–∞—Ü—ñ—è —Ç–µ–∫—Å—Ç—É —Ç–∞ –∞—É–¥—ñ–æ, –æ–±—Ä–æ–±–∫–∞ –ø–æ–º–∏–ª–æ–∫, –º–æ–∫—É–≤–∞–Ω–Ω—è API
- **FileStorageClient** - –∑–∞–≤–∞–Ω—Ç–∞–∂–µ–Ω–Ω—è, —Å–∫–∞—á—É–≤–∞–Ω–Ω—è, –≤–∏–¥–∞–ª–µ–Ω–Ω—è —Ñ–∞–π–ª—ñ–≤, –æ–±—Ä–æ–±–∫–∞ –ø–æ–º–∏–ª–æ–∫
- **QueueClient** - –º–µ—Ç–æ–¥–∏ —á–µ—Ä–≥–∏, –ø–µ—Ä–µ–≤—ñ—Ä–∫–∞ —ñ–Ω—Ç–µ—Ä—Ñ–µ–π—Å—É
- **TextToSpeechClient** - —ñ–Ω—Ç–µ—Ä—Ñ–µ–π—Å –¥–ª—è —Å–∏–Ω—Ç–µ–∑—É –º–æ–≤–∏

## –í–∞–∂–ª–∏–≤—ñ –ø—Ä–∏–º—ñ—Ç–∫–∏

1. **–Ü–∑–æ–ª—è—Ü—ñ—è —Ç–µ—Å—Ç—ñ–≤**: –ö–æ–∂–µ–Ω —Ç–µ—Å—Ç –Ω–µ–∑–∞–ª–µ–∂–Ω–∏–π
2. **AAA Pattern**: –í–∏–∫–æ—Ä–∏—Å—Ç–æ–≤—É—î—Ç—å—Å—è Arrange-Act-Assert –ø–∞—Ç—Ç–µ—Ä–Ω
3. **–ú–æ–∫–∏**: –ú–æ–∫–∞—é—Ç—å—Å—è –∑–æ–≤–Ω—ñ—à–Ω—ñ –∑–∞–ª–µ–∂–Ω–æ—Å—Ç—ñ
4. **–ê—Å–∏–Ω—Ö—Ä–æ–Ω–Ω—ñ—Å—Ç—å**: –ü—ñ–¥—Ç—Ä–∏–º–∫–∞ async/await
5. **–û—á–∏—â–µ–Ω–Ω—è**: Jest –∞–≤—Ç–æ–º–∞—Ç–∏—á–Ω–æ –æ—á–∏—â—É—î –º–æ–∫–∏ –º—ñ–∂ —Ç–µ—Å—Ç–∞–º–∏

## –ù–∞–ª–∞—à—Ç—É–≤–∞–Ω–Ω—è

- `jest.config.js` - –æ—Å–Ω–æ–≤–Ω–∞ –∫–æ–Ω—Ñ—ñ–≥—É—Ä–∞—Ü—ñ—è Jest
- `tests/setup.ts` - –≥–ª–æ–±–∞–ª—å–Ω—ñ –Ω–∞–ª–∞—à—Ç—É–≤–∞–Ω–Ω—è –ø–µ—Ä–µ–¥ —Ç–µ—Å—Ç–∞–º–∏
- `tests/teardown.ts` - –æ—á–∏—â–µ–Ω–Ω—è –ø—ñ—Å–ª—è —Ç–µ—Å—Ç—ñ–≤

## –ù–∞—Å—Ç—É–ø–Ω—ñ –∫—Ä–æ–∫–∏

1. –î–æ–¥–∞—Ç–∏ —Ç–µ—Å—Ç–∏ –¥–ª—è —Ä–µ–ø–æ–∑–∏—Ç–æ—Ä—ñ—ó–≤
2. –î–æ–¥–∞—Ç–∏ —Ç–µ—Å—Ç–∏ –¥–ª—è —Å–∫–ª–∞–¥–Ω–∏—Ö —Å–µ—Ä–≤—ñ—Å—ñ–≤
3. –ü—ñ–¥–≤–∏—â–∏—Ç–∏ –ø–æ–∫—Ä–∏—Ç—Ç—è –∫–æ–¥—É –¥–æ 80%+
4. –î–æ–¥–∞—Ç–∏ —ñ–Ω—Ç–µ–≥—Ä–∞—Ü—ñ–π–Ω—ñ —Ç–µ—Å—Ç–∏
5. –î–æ–¥–∞—Ç–∏ E2E —Ç–µ—Å—Ç–∏

